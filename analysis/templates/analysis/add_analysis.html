{% extends "analysis/dashboard.html" %}

{% block title %}Submit Malware Analysis{% endblock %}

{% block content %}
<style>
  /* Container styling */
.container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 1.5rem 1rem;
}

@media (min-width: 768px) {
    .container {
        padding: 1.5rem 1.5rem;
    }
}

@media (min-width: 1024px) {
    .container {
        padding: 1.5rem 2rem;
    }
}

/* Heading styling */
.text-xl {
    font-size: 1.25rem;
}

.text-2xl {
    font-size: 1.5rem;
}

.font-semibold {
    font-weight: 600;
}

.text-gray-200 {
    color: #e5e7eb;
}

.text-center {
    text-align: center;
}

.mb-6 {
    margin-bottom: 1.5rem;
}

/* Message Alert Section */
.alert {
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 0.25rem;
    position: relative;
}

.alert-dismissible .close {
    position: absolute;
    top: 0.5rem;
    right: 1rem;
    background: transparent;
    border: none;
}

.bg-blue-600 {
    background-color: #2563eb;
}

.text-green {
    color: green;
}

.rounded {
    border-radius: 0.25rem;
}

.fade {
    transition: opacity 0.15s linear;
}

.show {
    opacity: 1;
}

#notification {
    transition: opacity 0.5s ease;
}

/* Flex container */
.flex {
    display: flex;
    justify-content: center;
}

.w-full {
    width: 100%;
}

.sm\:w-11\/12 {
    width: 91.666667%;
}

.md\:w-3\/4 {
    width: 75%;
}

.lg\:w-1\/2 {
    width: 50%;
}

/* Card styling */
.card {
    background-color: #1e293b; /* bg-slate-800 */
    padding: 1.5rem;
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

@media (min-width: 768px) {
    .card {
        padding: 2rem;
    }
}

.card-header {
    background-color: #2563eb; /* bg-blue-600 */
    color: white;
    text-align: center;
    padding: 0.75rem;
    border-top-left-radius: 0.5rem;
    border-top-right-radius: 0.5rem;
}

.card-body {
    background-color: #374151; /* bg-slate-700 */
    padding: 1rem;
}

@media (min-width: 768px) {
    .card-body {
        padding: 1.5rem;
    }
}

/* Form styling */
.text-gray-200 {
    color: #e5e7eb;
}

.block {
    display: block;
}

.mb-2 {
    margin-bottom: 0.5rem;
}

.p-2 {
    padding: 0.5rem;
}

.bg-gray-800 {
    background-color: #1f2937;
}

.border {
    border-width: 1px;
    border-style: solid;
}

.border-gray-600 {
    border-color: #4b5563;
}

.rounded-md {
    border-radius: 0.375rem;
}

.text-gray-300 {
    color: #d1d5db;
}

.text-red-500 {
    color: #ef4444;
}

.mt-2 {
    margin-top: 0.5rem;
}

/* Button styling */
.btn {
    display: inline-block;
    background-color: #2563eb; /* bg-blue-600 */
    color: white;
    border-radius: 0.375rem;
    padding: 0.5rem 1.5rem;
    margin-top: 1rem;
    text-align: center;
    transition: background-color 0.3s ease;
}

.btn:hover {
    background-color: #1d4ed8; /* bg-blue-700 */
}

.sm\:w-auto {
    width: auto;
}

.w-full {
    width: 100%;
}

</style>
<div class="container">
  <h2 class="text-xl md:text-2xl font-semibold text-gray-200 mb-6 text-center">Submit Malware Analysis</h2>

  <!-- Message Alert Section -->
  {% if messages %}
  <div id="notification" class="alert alert-dismissible fade show" role="alert">
      {% for message in messages %}
      <div class="alert bg-blue-600 text-green text-center p-3 md:p-4 rounded">
          {{ message }}
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      {% endfor %}
  </div>
  {% endif %}

  <script>
    // Set timer to hide notification after 3 seconds
    setTimeout(function () {
        var notification = document.getElementById('notification');
        if (notification) {
            notification.style.transition = 'opacity 0.5s ease';
            notification.style.opacity = '0'; // Fade out
            setTimeout(function () { notification.remove(); }, 500); // Remove after fade out
        }
    }, 3000);
  </script>

  <div class="flex">
    <div class="card w-full sm:w-11/12 md:w-3/4 lg:w-1/2">
      <div class="card-header">
        <h5 class="text-md md:text-lg font-medium">Fill out the details below:</h5>
      </div>
      <div class="card-body">
        <form method="post">
          {% csrf_token %}
          <div class="mb-4">
            <label for="evidence" class="text-gray-200 block mb-2">Evidence</label>
            {{ form.evidence|add_class:"w-full p-2 bg-gray-800 border border-gray-600 rounded-md text-gray-300" }}
            {% if form.evidence.errors %}
              <div class="text-red-500 mt-2">{{ form.evidence.errors.as_text }}</div>
            {% endif %}
          </div>
          <div class="mb-4">
            <label for="analysis_result" class="text-gray-200 block mb-2">Analysis Result</label>
            {{ form.analysis_result|add_class:"w-full p-2 bg-gray-800 border border-gray-600 rounded-md text-gray-300" }}
            {% if form.analysis_result.errors %}
              <div class="text-red-500 mt-2">{{ form.analysis_result.errors.as_text }}</div>
            {% endif %}
          </div>
          <button type="submit" class="btn w-full sm:w-auto">Submit Analysis</button>
        </form>
      </div>
    </div>
  </div>
</div>

{% endblock %}
